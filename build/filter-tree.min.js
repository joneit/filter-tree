!function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return n(r?r:e)},c,c.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";function i(e,t){function r(){t.preInitialize&&t.preInitialize.apply(this,arguments),n.apply(this,arguments),t.postInitialize&&t.postInitialize.apply(this,arguments)}function o(e,r){a[r]=t[e]}switch(arguments.length){case 0:t={};break;case 1:if(t=e,"object"!=typeof t)throw"Single parameter overload must be object.";e=void 0;break;case 2:if("string"!=typeof e||"object"!=typeof t)throw"Two parameter overload must be string, object.";break;default:throw"Too many parameters"}r.extend=i;var a=r.prototype=Object.create(this.prototype);a.constructor=r,e&&i.debug&&(a.$$CLASS_NAME=e);for(var s in t)if(t.hasOwnProperty(s)){var l=t[s];switch(s){case"initializeOwn":break;case"aliases":for(var c in l)l.hasOwnProperty(c)&&o(l[c],c);break;default:"string"==typeof l&&"#"===l[0]?o(l,s.substr(1)):a[s]=l}}return r}function n(){function e(i){var n=Object.getPrototypeOf(i);n.constructor!==Object&&(e(n),n.hasOwnProperty("initialize")&&n.initialize.apply(t,r))}var t=this,r=arguments;e(t)}i.Base=function(){},i.Base.extend=i,t.exports=i},{}],2:[function(require,module,exports){function templex(e){var t=this instanceof Array?this:[this];return arguments.length>1&&t.unshift(arguments),e.replace(templex.regexp,templex.merger.bind(t))}templex.regexp=/\{(.*?)\}/g,templex["with"]=function(e,t){return"with(this["+e+"]){"+t+"}"},templex.cache=[],templex.deref=function(key){if(!(this.length in templex.cache)){for(var code="return eval(expr)",i=0;i<this.length;++i)code=templex["with"](i,code);templex.cache[this.length]=eval("(function(expr){"+code+"})")}return templex.cache[this.length].call(this,key)},templex.merger=function(e,t){var r;try{r=isNaN(t)?templex.deref.call(this,t):this[0][t]}catch(i){r="{"+t+"}"}return r},module.exports=templex},{}],3:[function(e,t,r){"use strict";function i(e){var t={operator:e.operator,children:[]};return e.children.forEach(function(e){t.children.push(e instanceof c?i(e):e)}),t}function n(e){var t=e.target;this[t.className]?(this[t.className](t),e.stopPropagation()):this[t.parentNode.className]&&(this[t.parentNode.className](t),e.stopPropagation())}var o=e("./js/FilterNode"),a=e("./js/template"),s=e("./js/tree-operators");e("./js/FilterLeaf");var l=0,c=o.extend("FilterTree",{newView:function(){this.el=a("tree",++l),this.el.addEventListener("click",n.bind(this))},fromJSON:function(e){if(e){if("object"!=typeof e){var t="Expected `json` parameter to be an object.";throw"string"==typeof e&&(t+=" See `JSON.parse()`."),this.Error(t)}if(!(e.children instanceof Array&&e.children.length))throw this.Error("Expected `children` field to be a non-empty array.");this.children=[];var r=this;if(e.children.forEach(function(e){var t;if("object"!=typeof e)throw r.Error("Expected child to be an object containing either `children`, `type`, or neither.");t=e.children?c:r.filters[e.type||"Default"],r.children.push(new t(e,r))}),!(s[e.operator]||void 0===e.operator&&1===e.children.length))throw this.Error("Expected `operator` field to be one of: "+Object.keys(s));this.operator=e.operator}else this.children=[new this.filters.Default(void 0,this)],this.operator="op-and"},render:function(){var e=this.el.querySelector("input[value="+this.operator+"]");e.checked=!0,this["filter-tree-choose-operator"](e),o.prototype.render.call(this)},"filter-tree-choose-operator":function(e){this.operator=e.value;var t=this.el.querySelectorAll("label>input.filter-tree-choose-operator[name="+e.name+"]");Array.prototype.slice.call(t).forEach(function(e){e.parentElement.style.textDecoration=e.checked?"none":"line-through"});for(var r in s)this.el.classList.remove(r);this.el.classList.add(this.operator)},"filter-tree-add-filter":function(){this.children.push(new this.filters.Default(void 0,this))},"filter-tree-add":function(){this.children.push(new c(void 0,this))},"filter-tree-remove":function(e){var t=e.parentElement,r=t.parentElement;if(1===r.children.length)alert("sole remaining conditional to be reset (cleared) rather than removed");else{var i=this.children,n=e.nextElementSibling;i.forEach(function(e,r){e.el===n&&(delete i[r],t.remove())})}},toJSON:function(){return i(this)}});window.FilterTree=c},{"./js/FilterLeaf":4,"./js/FilterNode":5,"./js/template":6,"./js/tree-operators":7}],4:[function(e,t,r){"use strict";function i(e,t,r){var i,o=t?"select":"input";if(t&&1===t.length){var a=t[0];i=document.createElement("span"),i.innerHTML=a.text||a;var s=document.createElement("input");s.type="hidden",s.value=a.value||a,i.appendChild(s)}else i=n(o,t,r);return e.appendChild(i),i}function n(e,t,r){var i=document.createElement(e);if(t){var o;"select"===e?(o=i.add,null!==r&&i.add(new Option(r?"("+r+")":""))):(o=i.appendChild,i.label=r),t.forEach(function(e){var t;if((e.options||e)instanceof Array){var r=n("optgroup",e.options||e,e.label);i.add(r)}else t="object"==typeof e?new Option(e.text,e.value):new Option(e),o.call(i,t)})}return i}var o=e("./FilterNode"),a=o.extend("FilterLeaf",{newView:function(){var e=this.el=document.createElement("span");e.className="filter-tree-default",this.bindings={field:i(e,this.fieldNames),operator:i(e,["=","≠","<",">","≤","≥"]),argument:i(e)},e.appendChild(document.createElement("br"))},fromJSON:function(e){if(e)for(var t in e)this.bindings[t].value=e[t]},toJSON:function(){var e={};for(var t in this.bindings)e[t]=this.bindings[t].value;return e}});o.prototype.filters.Default=a,t.exports=a},{"./FilterNode":5}],5:[function(e,t,r){"use strict";var i=e("extend-me"),n=i.Base,o=e("./template");i.debug=!0;var a=n.extend({initialize:function(e,t,r){if(e instanceof Array||(r=t,t=e,e=void 0),this.parent=r,this.fieldNames=e||t&&t.fieldNames||r&&r.fieldNames,!this.fieldNames)throw this.Error("No field names list.");this.newView(),this.fromJSON(t),this.render()},render:function(){if(this.parent){var e=document.createElement(this.CHILD_TAG);e.appendChild(o("removeButton")),e.appendChild(this.el),this.parent.el.querySelector(this.CHILDREN_TAG).appendChild(e)}},Error:function(e){return new Error("FilterTree: "+e)},CHILDREN_TAG:"OL",CHILD_TAG:"LI",CSS_CLASS_NAME:"filter-tree",filters:{}});t.exports=a},{"./template":6,"extend-me":1}],6:[function(e,t,r){"use strict";function i(e){var t=document.createElement("div"),r=a[e].toString(),i=r.indexOf("/*"),n=r.lastIndexOf("*/");if(-1===i||-1===n)throw"bad template";return i+=2,r=r.substr(i,n-i),r=o.apply(this,[r].concat(Array.prototype.slice.call(arguments,1))),t.innerHTML=r,t.children}function n(){return i.apply(this,arguments)[0]}var o=e("templex"),a={tree:function(){},removeButton:function(){}};n.getAll=i,t.exports=n},{templex:2}],7:[function(e,t,r){"use strict";t.exports={"op-and":{},"op-or":{},"op-nor":{}}},{}]},{},[3]);