!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("object-iterators"),i=e("pop-menu"),o=e("./js/FilterTree");o.Node=e("./js/FilterNode"),o.Leaf=e("./js/FilterLeaf"),o.Conditionals=e("./js/Conditionals"),o._=r,o.popMenu=i,window.FilterTree=o},{"./js/Conditionals":3,"./js/FilterLeaf":4,"./js/FilterNode":5,"./js/FilterTree":6,"object-iterators":14,"pop-menu":16}],2:[function(e,t,n){"use strict";n["column-CQL-syntax"]=["<li>",'\t<button type="button" class="copy"></button>','\t<div class="filter-tree-remove-button" title="delete conditional"></div>',"\t{1}:",'\t<input name="{2}" class="{4}" value="{3:encode}">',"</li>"].join("\n"),n["column-SQL-syntax"]=["<li>",'\t<button type="button" class="copy"></button>','\t<div class="filter-tree-remove-button" title="delete conditional"></div>',"\t{1}:",'\t<textarea name="{2}" rows="1" class="{4}">{3:encode}</textarea>',"</li>"].join("\n"),n.columnFilter=['<span class="filter-tree">',"\t <strong><span>{2} </span>column filter subexpression:</strong><br>","\t Match",'\t <label><input type="radio" class="filter-tree-op-choice" name="treeOp{1}" value="op-or">any</label>','\t <label><input type="radio" class="filter-tree-op-choice" name="treeOp{1}" value="op-and">all</label>','\t <label><input type="radio" class="filter-tree-op-choice" name="treeOp{1}" value="op-nor">none</label>',"\t of the following:","\t <select>",'\t\t <option value="">New expression&hellip;</option>',"\t </select>","\t <ol></ol>"," </span>"].join("\n"),n.columnFilters=['<span class="filter-tree filter-tree-type-column-filters">',"\t Match <strong>all</strong> of the following column filters:","\t <ol></ol>"," </span>"].join("\n"),n.lockedColumn=["<span>","\t {1:encode}",'\t <input type="hidden" value="{2}">'," </span>"].join("\n"),n.note=['<div class="footnotes">','\t<div class="footnote"></div>',"\t<p>Select a new value or delete the expression altogether.</p>","</div>"].join("\n"),n.notes=['<div class="footnotes">',"\t<p>Note the following error conditions:</p>",'\t<ul class="footnote"></ul>',"\t<p>Select new values or delete the expression altogether.</p>","</div>"].join("\n"),n.optionMissing=['The requested value of <span class="field-name">{1:encode}</span>','(<span class="field-value">{2:encode}</span>) is not valid.'].join("\n"),n.removeButton=['<div class="filter-tree-remove-button" title="delete conditional"></div>'].join("\n"),n.subtree=['<span class="filter-tree">',"\t Match",'\t <label><input type="radio" class="filter-tree-op-choice" name="treeOp{1}" value="op-or">any</label>','\t <label><input type="radio" class="filter-tree-op-choice" name="treeOp{1}" value="op-and">all</label>','\t <label><input type="radio" class="filter-tree-op-choice" name="treeOp{1}" value="op-nor">none</label>',"\t of the following:","\t <select>",'\t\t <option value="">New expression&hellip;</option>','\t\t <option value="subexp" style="border-bottom:1px solid black">Subexpression</option>',"\t </select>","\t <ol></ol>"," </span>"].join("\n")},{}],3:[function(e,t,n){"use strict";function r(e,t){return t.trim().replace(/\s*,\s*/g,",").split(",").indexOf(e+"")}function i(e,t){return l(e).indexOf(l(t))}function o(e,t){return l(e).substr(0,t)}function a(e,t){return l(e).substr(-t,t)}function s(e){return e.replace(/'/g,"''")}var l,c=e("extend-me").Base,u=e("object-iterators"),h=e("regexp-like"),p="IN",f="NOT "+p,d="LIKE",m="NOT "+d,v="%",g="",b={beg:'"',end:'"'},y=c.extend({initialize:function(e){var t=e&&e.sqlIdQts;t&&(this.sqlIdQts=t)},sqlIdQts:b,makeSqlIdentifier:function(e){return this.sqlIdQts.beg+e+this.sqlIdQts.end},makeSqlString:function(e){return"'"+s(e)+"'"},makeLIKE:function(e,t,n,r,i){var o=i.operand.replace(/([_\[\]%])/g,"[$1]");return this.makeSqlIdentifier(i.column)+" "+n+" "+this.makeSqlString(e+o+t)},makeIN:function(e,t){return this.makeSqlIdentifier(t.column)+" "+e+" ('"+s(t.operand).replace(/\s*,\s*/g,"', '")+"')"},make:function(e,t){return this.makeSqlIdentifier(t.column)+" "+e+" "+t.makeSqlOperand()}}),x=y.prototype.ops={undefined:{test:function(){return!0},make:function(){return""}},"<":{test:function(e,t){return e<t},make:function(e){return this.make("<",e)}},"<=":{test:function(e,t){return e<=t},make:function(e){return this.make("<=",e)}},"=":{test:function(e,t){return e===t},make:function(e){return this.make("=",e)}},">=":{test:function(e,t){return e>=t},make:function(e){return this.make(">=",e)}},">":{test:function(e,t){return e>t},make:function(e){return this.make(">",e)}},"<>":{test:function(e,t){return e!==t},make:function(e){return this.make("<>",e)}},LIKE:{test:function(e,t){return h.cached(t,!0).test(e)},make:function(e){return this.make(d,e)},type:"string"},"NOT LIKE":{test:function(e,t){return!h.cached(t,!0).test(e)},make:function(e){return this.make(m,e)},type:"string"},IN:{test:function(e,t){return r(e,t)>=0},make:function(e){return this.makeIN(p,e)},operandList:!0,type:"string"},"NOT IN":{test:function(e,t){return r(e,t)<0},make:function(e){return this.makeIN(f,e)},operandList:!0,type:"string"},CONTAINS:{test:function(e,t){return i(e,t)>=0},make:function(e){return this.makeLIKE(v,v,d,"CONTAINS",e)},type:"string"},"NOT CONTAINS":{test:function(e,t){return i(e,t)<0},make:function(e){return this.makeLIKE(v,v,m,"NOT CONTAINS",e)},type:"string"},BEGINS:{test:function(e,t){return t=l(t),o(e,t.length)===t},make:function(e){return this.makeLIKE(g,v,d,"BEGINS",e)},type:"string"},"NOT BEGINS":{test:function(e,t){return t=l(t),o(e,t.length)!==t},make:function(e){return this.makeLIKE(g,v,m,"NOT BEGINS",e)},type:"string"},ENDS:{test:function(e,t){return t=l(t),a(e,t.length)===t},make:function(e){return this.makeLIKE(v,g,d,"ENDS",e)},type:"string"},"NOT ENDS":{test:function(e,t){return t=l(t),a(e,t.length)!==t},make:function(e){return this.makeLIKE(v,g,m,"NOT ENDS",e)},type:"string"}};x["≤"]=x["<="],x["≥"]=x[">="],x["≠"]=x["<>"];var w={equality:{label:"Equality",submenu:["="]},inequalities:{label:"Inequalities",submenu:["<","≤","≠","≥",">"]},sets:{label:"Set scans",submenu:["IN","NOT IN"]},strings:{label:"String scans",submenu:["CONTAINS","NOT CONTAINS","BEGINS","NOT BEGINS","ENDS","NOT ENDS"]},patterns:{label:"Pattern scans",submenu:["LIKE","NOT LIKE"]}};u(w).each(function(e,t){e.name=t}),y.groups=w,y.defaultOpMenu=[w.equality,w.inequalities,w.sets,w.strings,w.patterns],y.setToString=function(e){return l=e},t.exports=y},{"extend-me":13,"object-iterators":14,"regexp-like":17}],4:[function(e,t,n){"use strict";function r(e){var t=e.target;if(t.classList.remove("filter-tree-error"),h.setWarningClass(t),t===this.view.column&&a.call(this,t.value),t.value){if(!t.multiple)for(;(t=t.nextElementSibling)&&(!("name"in t)||""!==t.value.trim()););t&&""===t.value.trim()&&(t.value="",h.clickIn(t))}this.eventHandler&&this.eventHandler(e)}function i(e,t,n){var r=this.schema.lookup(e)||{};return r[t]||"function"==typeof n&&n.call(this,r,t)||"function"!=typeof n&&n||this[t]}function o(e){return i.call(this,e,"opMenu",function(e){return this.typeOpMap&&this.typeOpMap[e.type||this.type]})}function a(e){var t=o.call(this,e);if(t!==this.renderedOpMenu){var n=this.makeElement(t,"operator");n.value=this.view.operator.value,this.el.replaceChild(n,this.view.operator),this.view.operator=n,h.setWarningClass(n),this.renderedOpMenu=t}}function s(e){setTimeout(function(){e.classList.add("filter-tree-error"),h.clickIn(e)},0)}function l(e){var t,n;switch(e.type){case"checkbox":case"radio":for(e=document.querySelectorAll("input[name='"+e.name+"']:enabled:checked"),t=[],n=0;n<e.length;n++)t.push(e[n].value);break;case"select-multiple":for(e=e.options,t=[],n=0;n<e.length;n++)!e.disabled&&e.selected&&t.push(e[n].value);break;default:t=e.value}return t}var c,u=e("pop-menu"),h=e("./FilterNode"),p=e("./Conditionals"),f={toType:Number,failed:isNaN},d={toType:function(e){return new Date(e)},failed:isNaN},m=h.extend("FilterLeaf",{name:"column = value",destroy:function(){if(this.view)for(var e in this.view)this.view[e].removeEventListener("change",this.onChange)},createView:function(e){var t=this.el=document.createElement("span");if(t.className="filter-tree-editor filter-tree-default",e&&e.column);else var n=this.schema&&1===this.schema.length&&this.schema[0],r=n&&n.name||n;this.view={column:this.makeElement(this.schema,"column",this.sortColumnMenu),operator:this.makeElement(o.call(this,r),"operator"),operand:this.makeElement()},t.appendChild(document.createElement("br"))},loadState:function(e){function t(e){var t=e.name||e;c[t]===p&&(r.value=t)}var n,r,i,s,l,c,p,f,d;if(e){d=[];for(var m in e)if(!h.optionsSchema[m])switch(n=this[m]=e[m],r=this.view[m],r.type){case"checkbox":case"radio":for(r=document.querySelectorAll("input[name='"+r.name+"']"),i=0;i<r.length;i++)r[i].checked=n.indexOf(r[i].value)>=0;break;case"select-multiple":for(r=r.options,i=0,s=!1;i<r.length;i++,s=s||l)l=n.indexOf(r[i].value)>=0,r[i].selected=l;h.setWarningClass(r,s);break;default:r.value=n,""===r.value&&"operator"===m&&(c=this.root.conditionals.ops,p=c[n],f=o.call(this,e.column||this.column),u.walk.call(f,t)),h.setWarningClass(r)?"column"===m&&a.call(this,n):d.push({key:m,value:n})}if(d.length){var v=d.length>1,g=this.templates,b=g.get(v?"notes":"note"),y=b.querySelector(".footnote");d.forEach(function(e){var t=v?document.createElement("li"):y;for(e=g.get("optionMissing",e.key,e.value);e.length;)t.appendChild(e[0]);v&&y.appendChild(t)})}this.notesEl=b}},converters:{number:f,"int":f,"float":f,date:d},invalid:function(e){var t,n,r;for(t in this.view){var o=this.view[t],a=l(o).trim();if(""===a&&"operator"===t&&this.root.conditionals.ops[this.operator]&&!i.call(this,this.column,"opMustBeInMenu")&&(a=this.operator),""===a){if(!r&&e&&e.focus&&(s(o),r=!0),e&&e["throw"])throw new this.Error("Missing or invalid "+t+" in conditional expression. Complete the expression or remove it.",this)}else this[t]=a}this.op=this.root.conditionals.ops[this.operator],n=this.getType(),this.converter=n&&"string"!==n&&this.converters[n],this.calculator=this.getCalculator()},getType:function(){return this.op.type||i.call(this,this.column,"type")},getCalculator:function(){return i.call(this,this.column,"calculator")},valOrFunc:function(e,t,n){var r;return e&&(r=e[t],n="f"===(typeof r)[0]?r:n,n&&(r=n(e,t))),r||0===r||r===!1?r:""},p:function(e){return this.valOrFunc(e,this.column,this.calculator)},q:function(){return this.operand},test:function(e){var t,n,r,i,o;return void 0!==(t=this.p(e))&&void 0!==(n=this.q(e))&&(!(o=this.converter)||o.failed(r=o.toType(t))||o.failed(i=o.toType(n))?this.op.test(c(t),c(n)):this.op.test(r,i))},toJSON:function(){var e={};this.editor&&(e.editor=this.editor);for(var t in this.view)e[t]=this[t];return this.schema!==this.parent.schema&&(e.schema=this.schema),e},getState:function(e){var t="",n=e&&e.syntax||"object";switch(n){case"object":t=this.toJSON();break;case"JSON":t=JSON.stringify(this,null,e&&e.space)||"";break;case"SQL":t=this.getSyntax(this.root.conditionals)}return t},makeSqlOperand:function(){return this.root.conditionals.makeSqlString(this.operand)},getSyntax:function(e){return this.root.conditionals.ops[this.operator].make.call(e,this)},makeElement:function(e,t,n){for(var i,o,a,s=e,l=e?"SELECT":"INPUT";s instanceof Array;)s=1!==s.length||u.isGroupProxy(s[0])?void 0:s[0];return s?(i=this.templates.get("lockedColumn",s.alias||s.header||s.name||s,s.name||s.alias||s.header||s),o=i.querySelector("input")):(a={prompt:t,sort:n,group:function(e){return p.groups[e]}},i=u.build(l,e,a),"text"===i.type&&this.eventHandler&&this.el.addEventListener("keyup",this.eventHandler),this.onChange=this.onChange||r.bind(this),this.el.addEventListener("change",this.onChange),h.setWarningClass(i),o=i),this.el.appendChild(i),o}});m.setToString=function(e){return c=e,p.setToString(e)},t.exports=m},{"./Conditionals":3,"./FilterNode":5,"pop-menu":16}],5:[function(e,t,n){"use strict";function r(e,t){this.message=e,this.node=t}var i=e("object-iterators"),o=e("extend-me"),a=o.Base;o.debug=!0;var s=e("pop-menu"),l=e("./stylesheet"),c=e("./Templates"),u=e("./Conditionals"),h=e("./parser-SQL"),p="OL",f="LI",d=/^\s*((\[[^]*\])|(\{[^]*\}))\s*$/;r.prototype=Object.create(Error.prototype),r.prototype.name="FilterTreeError";var m=a.extend("FilterNode",{initialize:function(e){e=e||{};var t=this.parent=this.parent||e.parent,n=t&&t.root;if(!n){n=this,this.stylesheet=this.stylesheet||l(e.cssStylesheetReferenceElement),this.conditionals=new u(e),this.ParserSQL=new h(e);var r=["name"];e.resolveAliases&&r.push("alias"),this.findOptions={caseSensitive:e.caseSensitiveColumnNames,keys:r}}this.root=n,this.dontPersist={},this.setState(e.state,e)},render:function(){if(this.parent){var e=document.createElement(f);if(this.notesEl&&e.appendChild(this.notesEl),!this.keep){var t=this.templates.get("removeButton");t.addEventListener("click",this.remove.bind(this)),e.appendChild(t)}e.appendChild(this.el),this.parent.el.querySelector(p).appendChild(e)}},setState:function(e,t){var n=this.el;if(e=this.parseStateString(e,t),this.mixInStandardOptions(e,t),this.mixInNonstandardOptions(t),this.createView(e),this.loadState(e),this.render(),n){var r=this.el;this.parent&&"LI"===n.parentElement.tagName&&(n=n.parentNode,r=r.parentNode),n.parentNode.replaceChild(r,n)}},parseStateString:function(e,t){if(e){if("string"==typeof e){var n=t&&t.context,i=t&&t.syntax||"auto";switch(n&&(e=n.querySelector(e).value),"auto"===i&&(i=d.test(e)?"JSON":"SQL"),i){case"JSON":try{e=JSON.parse(e)}catch(o){throw new r("JSON parser: "+o)}break;case"SQL":try{e=this.root.ParserSQL.parse(e)}catch(o){throw new r("SQL WHERE clause parser: "+o)}}}if("object"!=typeof e)throw new r("Unexpected input state.")}return e},mixInStandardOptions:function(e,t){var n=this;i(m.optionsSchema).each(function(r,i){if(!r.ignore&&(this!==this.root||r.rootBound)){var o;n.dontPersist[i]=void 0!==(o=t&&t[i])||void 0===(o=e&&e[i])&&!(r.own||n.hasOwnProperty(i)&&null!==o)&&!(o=n.parent&&n.parent[i])&&(o=r["default"]),null===o?(delete n[i],n.dontPersist[i]=!1):o&&("schema"!==i||o.walk||(o.walk=s.walk.bind(o),o.lookup=s.lookup.bind(o,n.root.findOptions)),n[i]=o)}})},mixInNonstandardOptions:function(e){var t=this;i(e).each(function(e,n){m.optionsSchema[n]||(t[n]=e)})},remove:function(){var e,t=this.parent;t&&(this.eventHandler&&this.eventHandler.call(t,{type:"delete",preventDefault:function(){e=!0}}),e||(t.keep||t.children.length>1?(this.el.parentNode.remove(),t.children.splice(t.children.indexOf(this),1)):t.remove()))},firstChildOfType:function(e){var t=this.el.querySelector(e);return t&&t.parentElement!==this.el&&(t=null),t},Error:r,templates:new c});m.optionsSchema={state:{ignore:!0},cssStylesheetReferenceElement:{ignore:!0},ownSchema:{own:!0},schema:{},editor:{},eventHandler:{},type:{own:!0},keep:{own:!0},opMenu:{"default":u.defaultOpMenu},opMustBeInMenu:{},typeOpMap:{rootBound:!0},sortColumnMenu:{}},m.setWarningClass=function(e,t){return arguments.length<2&&(t=e.value),e.classList[t?"remove":"add"]("filter-tree-warning"),t},m.clickIn=function(e){e&&("SELECT"===e.tagName?setTimeout(function(){e.dispatchEvent(new MouseEvent("mousedown"))},0):e.focus())},t.exports=m},{"./Conditionals":3,"./Templates":7,"./parser-SQL":9,"./stylesheet":10,"extend-me":13,"object-iterators":14,"pop-menu":16}],6:[function(e,t,n){"use strict";function r(e){return(e+"").toUpperCase()}function i(e){return e+""}function o(e){var t=e.target;t.parentElement===this.el&&("subexp"===t.value?this.children.push(new m({parent:this})):this.add({state:{editor:t.value},focus:!0}),t.selectedIndex=0)}function a(e){var t=e.target;if("filter-tree-op-choice"===t.className){this.operator=t.value;var n=this.el.querySelectorAll("label>input.filter-tree-op-choice[name="+t.name+"]");Array.prototype.forEach.call(n,function(e){e.parentElement.style.textDecoration=e.checked?"none":"line-through"});for(var r in f)this.el.classList.remove(r);this.el.classList.add(this.operator)}}function s(e){this.children.forEach(function(t){t instanceof p?t.invalid(e):t.children.length&&s.call(t,e)})}var l=e("pop-menu"),c=e("unstrungify"),u=e("object-iterators"),h=e("./FilterNode"),p=e("./FilterLeaf"),f=e("./tree-operators"),d=0,m=h.extend("FilterTree",{editors:{Default:p},addEditor:function(e,t,n){return"object"==typeof e&&(n=t,t=e,e="Default"),n=n||this.editors.Default,t=t||m.extensions[e],this.editors[e]=n.extend(e,t)},removeEditor:function(e){if("Default"===e)throw"Cannot remove default editor.";delete this.editors[e]},createView:function(){this.el=this.templates.get(this.type||"subtree",++d,this.schema[0]&&l.formatItem(this.schema[0]));var e=this.firstChildOfType("select");if(e){var t,n,r=this.editors;1===e.length&&1===this.editors.length?t=e:(t=n=document.createElement("optgroup"),n.label="Conditional Expressions"),Object.keys(r).forEach(function(e){var n=r[e].prototype.name||e;t.appendChild(new Option(n,e))}),n&&e.add(n),this.el.addEventListener("change",o.bind(this))}this.el.addEventListener("click",a.bind(this))},loadState:function(e){if(this.operator="op-and",this.children=[],e){if(!(e.children instanceof Array))throw new this.Error("Expected `children` property to be an array.");if(e.operator){if(!f[e.operator])throw new this.Error("Expected `operator` property to be one of: "+Object.keys(f));this.operator=e.operator}e.children.forEach(this.add.bind(this))}else this.add()},render:function(){var e=this.firstChildOfType("label > input[value="+this.operator+"]"),t=this.el.querySelector(".filter-tree-add-conditional");e&&(e.checked=!0,a.call(this,{target:e})),t&&!this.children.length&&Object.keys(this.editors).length>1&&this["filter-tree-add-conditional"]({target:t}),h.prototype.render.call(this)},add:function(e){var t,n;return e=e||{},e.state||(e={state:e}),t=e.state.children?this.constructor:this.editors[e.state.editor||"Default"],e.parent=this,n=new t(e),this.children.push(n),e.focus&&setTimeout(function(){n.invalid(e)},750),n},invalid:function(e){e=e||{};var t,n;n=e["throw"],e["throw"]=!0;try{s.call(this,e)}catch(r){if(t=r,!(r instanceof this.Error))throw r}if(e["throw"]=n,t&&(e.alert&&window.alert(t.message||t),e["throw"]))throw t;return t},test:function v(e){var t=f[this.operator],n=t.seed,r=!0;return this.children.find(function(i){return!!i&&(r=!1,i instanceof p?n=t.reduce(n,i.test(e)):i.children.length&&(n=t.reduce(n,v.call(i,e))),n===t.abort)}),r||(t.negate?!n:n)},filterCount:function g(){var e=0;return this.children.forEach(function(t){e+=t instanceof p?1:g.call(t)}),e},getState:function b(e){var t="",n=e&&e.syntax||"object";switch(n){case"object":t=c.call(this);break;case"JSON":t=JSON.stringify(this,null,e&&e.space)||"";break;case"SQL":var r=f[this.operator].SQL;this.children.forEach(function(n,i){var o=i?" "+r.op+" ":"";n instanceof p?t+=o+n.getState(e):n.children.length&&(t+=o+b.call(n,e))}),t&&(t=r.beg+t+r.end);break;default:throw new this.Error('Unknown syntax option "'+n+'"')}return t},toJSON:function y(){var e=this,t={operator:this.operator,children:[]};return this.children.forEach(function(e){t.children.push(e instanceof p?e:y.call(e))}),u(h.optionsSchema).each(function(n,r){!e[r]||e.dontPersist[r]||!n.own&&e.parent&&e[r]===e.parent[r]||(t[r]=e[r])}),t},set caseSensitiveData(e){var t=e?i:r;p.setToString(t)}});m.extensions={Columns:e("./extensions/columns")},m.prototype.caseSensitiveData=!0,t.exports=m},{"./FilterLeaf":4,"./FilterNode":5,"./extensions/columns":8,"./tree-operators":11,"object-iterators":14,"pop-menu":16,unstrungify:19}],7:[function(e,t,n){"use strict";function r(){}var i=e("templex"),o=e("../html"),a=/\{(\d+)\:encode\}/g,s=r.prototype.constructor;r.prototype=o,r.prototype.constructor=s,r.prototype.get=function(e){var t,n={},r=document.createElement("div"),o=this[e],s=Array.prototype.slice.call(arguments,1);for(a.lastIndex=0;t=a.exec(o);)n[t[1]]=!0;return t=Object.keys(n),t.length&&(t.forEach(function(e){r.textContent=s[e],s[e]=r.innerHTML}),o=o.replace(a,"{$1}")),r.innerHTML=i.apply(this,[o].concat(s)),1===r.children.length&&1===r.childNodes.length?r.firstChild:r.childNodes},t.exports=r},{"../html":2,templex:18}],8:[function(e,t,n){"use strict";var r=e("../Conditionals"),i=e("../FilterLeaf"),o={name:"column = column",createView:function(){i.prototype.createView.call(this);var e=this.view.operand,t=this.view.operand=this.makeElement(this.root.schema,"column",this.sortColumnMenu);this.el.replaceChild(t,e)},makeSqlOperand:function(){return this.root.conditionals.makeSqlIdentifier(this.operand)},opMenu:[r.groups.equality,r.groups.inequalities,r.groups.sets],q:function(e){return this.valOrFunc(e,this.operand,this.calculator)}};t.exports=o},{"../Conditionals":3,"../FilterLeaf":4}],9:[function(e,t,n){"use strict";function r(e){this.message=e}function i(e){e=e||{},this.schema=e.schema;var t=e.sqlIdQts||v;this.reName=new RegExp("^("+t.beg+"(.+?)"+t.end+"|([A-Z_][A-Z_@\\$#]*)\\b)","i")}function o(e){var t,n,i,s,m,v,g,b=[],y=0;for(e=e.trim();y<e.length;){if(t=e.substr(y).match(d)){var x=!!t[1];y+=t[0].length;for(var w=y,k=1;w<e.length&&k;++w)"("===e[w]?++k:")"===e[w]&&--k;if(k)throw new r('Expected ")"');if(g=o.call(this,e.substr(y,w-1-y)),"object"!=typeof g)return g;if(x){if("op-or"!==g.operator)throw new r("Expected OR in NOT(...) subexpression but found "+g.operator.substr(3).toUpperCase()+".");g.operator="op-nor"}y=w}else{if(t=e.substr(y).match(this.reName),!t)throw new r("Expected identifier or quoted identifier.");if(n=t[2]||t[3],/^[A-Z_]/i.test(e[y])||(y+=2),y+=n.length," "===e[y]&&++y,t=e.substr(y).match(l),!t)throw new r("Expected relational operator.");if(i=t[1].toUpperCase(),y+=i.length,m=void 0," "===e[y]&&++y,t[4]&&"IN"===t[4].toUpperCase()){if(t=e.substr(y).match(p),!t)throw new r("Expected parenthesized list.");for(s=t[1],y+=s.length+2;t=s.match(h);)s=s.replace(h,this.literals[t[1]])}else if(t=e.substr(y).match(u))s=t[1],y+=s.length+2,s=this.literals[s];else if(t=e.substr(y).match(c))s=t[1],y+=s.length;else{if(!(t=e.substr(y).match(this.reName)))throw new r("Expected number or string literal or column.");s=t[2]||t[3],y+=s.length,m="Columns"}this.schema&&(n=a.call(this,n),m&&(s=a.call(this,s))),g={column:n,operator:i,operand:s},m&&(g.editor=m)}if(b.push(g),y<e.length){if(" "===e[y]&&++y,t=e.substr(y).match(f),!t)throw new r("Expected boolean operator.");if(v=t[1].toLowerCase(),y+=v.length,v="op-"+v,b.operator&&b.operator!==v)throw new r("Expected same boolean operator throughout subexpression.");b.operator=v}" "===e[y]&&++y}return 1===b.length?b[0]:{operator:b.operator,children:b}}function a(e){var t=this.schema.lookup(e);if(!t)throw new r(this.resolveAliases?"Expected valid column name.":"Expected valid column name or alias.");return t.name}function s(e){var t,n=0,i=0;for(this.literals=[];(i=e.indexOf(m,i))>=0;){t=i;do if(t=e.indexOf(m,t+1),t<0)throw new r("Expected "+m+" (single quote).");while(e[++t]===m);this.literals.push(e.slice(++i,--t).replace(/''/g,m)),e=e.substr(0,i)+n+e.substr(t),i=i+1+(n+"").length+1,n++}return e}var l=/^((=|>=?|<[>=]?)|(NOT )?(LIKE|IN)\b)/i,c=/^([+-]?(\d+(\.\d*)?|\d*\.\d+)(e[+-]\d+)?)[^\d]?/i,u=/^'(\d+)'/,h=/'(\d+)'/,p=/^\((.*?)\)/,f=/^(AND|OR)\b/i,d=/^(NOT ?)?\(/i,m="'",v={beg:'"',end:'"'};r.prototype=Object.create(Error.prototype),r.prototype.name="ParserSqlError",i.prototype={constructor:i.prototype.constructor,parse:function(e){var t;return e=e.replace(/\s\s+/g," ").trim(),e=s.call(this,e),t=o.call(this,e),t.children||(t={children:[t]}),t}},t.exports=i},{}],10:[function(e,t,n){"use strict";var r,i=e("css-injector");r=".filter-tree{font-family:sans-serif;font-size:10pt;line-height:1.5em}.filter-tree label{font-weight:400}.filter-tree input[type=checkbox],.filter-tree input[type=radio]{margin-left:3px;margin-right:3px}.filter-tree ol{margin-top:0}.filter-tree>select{float:right;border:1px dotted grey;background-color:transparent;box-shadow:none}.filter-tree-remove-button{display:inline-block;width:15px;height:15px;border-radius:8px;background-color:#e88;font-size:11.5px;color:#fff;text-align:center;line-height:normal;font-style:normal;font-family:sans-serif;margin-right:4px;cursor:pointer}.filter-tree-remove-button:hover{background-color:transparent;color:#e88;font-weight:700;box-shadow:red 0 0 2px inset}.filter-tree-remove-button::before{content:'\\d7'}.filter-tree li::after{font-size:70%;font-style:italic;font-weight:700;color:#080}.filter-tree>ol>li:last-child::after{display:none}.op-and>ol,.op-nor>ol,.op-or>ol{padding-left:5px;margin-left:27px}.op-or>ol>li::after{margin-left:2.5em;content:'— OR —'}.op-and>ol>li::after{margin-left:2.5em;content:'— AND —'}.op-nor>ol>li::after{margin-left:2.5em;content:'— NOR —'}.filter-tree-editor>*{font-weight:700}.filter-tree-editor>span{font-size:smaller}.filter-tree-editor>input[type=text]{width:8em;padding:1px 5px 2px}.filter-tree-warning{background-color:#ffc!important;border-color:#edb!important;font-weight:400!important}.filter-tree-error{background-color:#fcc!important;border-color:#c99!important;font-weight:400!important}.filter-tree-default>:enabled{margin:0 .4em;background-color:#ddd;border:1px solid transparent}.filter-tree.filter-tree-type-column-filters>ol>li:not(:last-child){padding-bottom:.75em;border-bottom:3px double #080;margin-bottom:.75em}.filter-tree .footnotes{margin:0 0 6px;font-size:8pt;font-weight:400;line-height:normal;white-space:normal;color:#c00}.filter-tree .footnotes>p{margin:0}.filter-tree .footnotes>ul{margin:-3px 0 0;padding-left:17px;text-index:-6px}.filter-tree .footnotes>ul>li{margin:2px 0}.filter-tree .footnotes .field-name,.filter-tree .footnotes .field-value{font-weight:700;font-style:normal}.filter-tree .footnotes .field-value{font-family:monospace;color:#000;background-color:#ddd;padding:0 5px;margin:0 3px;border-radius:3px}",t.exports=i.bind(this,r,"filter-tree-base")},{"css-injector":12}],11:[function(e,t,n){"use strict";function r(e,t){return e&&t}function i(e,t){return e||t}var o={"op-and":{reduce:r,seed:!0,abort:!1,negate:!1,SQL:{op:"AND",beg:"(",end:")"}},"op-or":{reduce:i,seed:!1,abort:!0,negate:!1,SQL:{op:"OR",beg:"(",end:")"}},"op-nor":{reduce:i,seed:!1,abort:!0,negate:!0,SQL:{op:"OR",beg:"NOT (",end:")"}}};t.exports=o},{}],12:[function(e,t,n){"use strict";function r(e,t,n){if("string"==typeof n){if(n=document.querySelector(n),!n)throw"Cannot find reference element for CSS injection."}else if(n&&!(n instanceof Element))throw"Given value not a reference element.";var i=n&&n.parentNode||document.head||document.getElementsByTagName("head")[0];if(!t||(t=r.idPrefix+t,!i.querySelector("#"+t))){var o=document.createElement("style");return o.type="text/css",t&&(o.id=t),e instanceof Array&&(e=e.join("\n")),e="\n"+e+"\n",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),void 0===n&&(n=i.firstChild),i.insertBefore(o,n),o}}r.idPrefix="injected-stylesheet-",t.exports=r},{}],13:[function(e,t,n){"use strict";function r(e,t){function n(){t.preInitialize&&t.preInitialize.apply(this,arguments),o.apply(this,arguments),t.postInitialize&&t.postInitialize.apply(this,arguments)}switch(arguments.length){case 0:t={};break;case 1:switch(typeof e){case"object":t=e,e=void 0;break;case"string":t={};break;default:throw"Single-parameter overload must be either string or object."}break;case 2:if("string"!=typeof e||"object"!=typeof t)throw"Two-parameter overload must be string, object.";break;default:throw"Too many parameters"}n.extend=r;var i=n.prototype=Object.create(this.prototype);return i.constructor=n,e&&(i.$$CLASS_NAME=e),a(i,t),n}function i(){}function o(){function e(r){var i=Object.getPrototypeOf(r);i.constructor!==Object&&(e(i),i.hasOwnProperty("initialize")&&i.initialize.apply(t,n))}var t=this,n=arguments;e(t)}var a=e("overrider");i.prototype={constructor:i.prototype.constructor,get super(){return Object.getPrototypeOf(Object.getPrototypeOf(this))}},i.extend=r,r.Base=i,t.exports=r},{overrider:15}],14:[function(e,t,n){"use strict";function r(e){return e instanceof r?e:this instanceof r?(this.originalValue=e,void(this.o=e||{})):new r(e)}r.chain=function(e){var t=r(e);return t.chaining=!0,t},r.prototype={value:function(){return this.originalValue},each:function(e,t){var n=this.o;return Object.keys(n).forEach(function(t){e.call(this,n[t],t,n)},t||n),this},find:function(e,t){var n,r=this.o;return r&&(n=Object.keys(r).find(function(t){return e.call(this,r[t],t,r)},t||r),void 0!==n&&(n=r[n])),n},filter:function(e,t){var n=this.o,r=[];return n&&Object.keys(n).forEach(function(t){e.call(this,n[t],t,n)&&r.push(n[t])},t||n),r},map:function(e,t){var n=this.o,r=[];return n&&Object.keys(n).forEach(function(t){r.push(e.call(this,n[t],t,n))},t||n),r},reduce:function(e,t,n){var r=this.o;return r&&Object.keys(r).forEach(function(n,i){t=i||void 0!==t?e(t,r[n],n,r):r[n]},n||r),t},extend:function(e){var t=this.o;return Array.prototype.slice.call(arguments).forEach(function(e){if(e)for(var n in e)t[n]=e[n]}),this.chaining?this:t},extendOwn:function(e){var t=this.o;return Array.prototype.slice.call(arguments).forEach(function(e){r(e).each(function(e,n){t[n]=e})}),this.chaining?this:t}},Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return t}),t.exports=r},{}],15:[function(e,t,n){"use strict";function r(e,t){for(var n,r,i=1;i<arguments.length;++i)if(t=arguments[i],"object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(r=Object.getOwnPropertyDescriptor(t,n),Object.defineProperty(e,n,r));return e}t.exports=r},{}],16:[function(e,t,n){"use strict";function r(e,t,n){n=n||{};var o,a=n.prompt,s=n.blacklist,l=n.sort,c=n.breadcrumbs||[],p=c.length?c.join(".")+".":"",f=h.subtree,d=0;if(e instanceof Element?(o=e.tagName,n.append||(e.innerHTML="")):(o=e,e=document.createElement(o)),t){var m,v;"SELECT"===o?(m=e.add,a?(v=new Option(a,""),v.innerHTML+="&hellip;",e.add(v)):null!==a&&e.add(new Option)):(m=e.appendChild,e.label=a),l&&(t=t.slice().sort(i)),t.forEach(function(t){if(n&&"string"==typeof t){var i=t.match(u);if(i){var o=i[1],a=i[2],h=n[o];if("function"!=typeof h)throw"build: Expected options."+o+" to be a function.";if(t=h(a),!t)throw"build: Expected a result from options."+o+"("+a+")."}}var v=t[f]||t;if(v instanceof Array){var g={breadcrumbs:c.concat(++d),prompt:t.label||"Group "+p+d,options:l,blacklist:s},b=r("OPTGROUP",v,g);b.childElementCount&&e.appendChild(b)}else if("object"!=typeof t)s&&s.indexOf(t)>=0||m.call(e,new Option(t));else if(!t.hidden){var y=t.name||t.alias||t.header;s&&s.indexOf(y)>=0||m.call(e,new Option(t.alias||t.header||t.name,y))}})}else e.type="text";return e}function i(e,t){return e=e.alias||e.header||e.name||e.label||e,t=t.alias||t.header||t.name||t.label||t,e<t?-1:e>t?1:0}function o(e,t){1===arguments.length&&(t=e,e=void 0);var n,r,i,s,l=e&&e.keys||[h.defaultKey],c=e&&e.caseSensitive;return t=a(t,c),n=this.find(function(n){var i=n[h.subtree]||n;if(i instanceof Array)return r=o.call(i,e,t);if("object"!=typeof n)return a(n,c)===t;for(var u=0;u<l.length;++u)if(s=n[l[u]],s&&a(s,c)===t)return!0}),i=r||n,i&&(i.name?i:{name:i})}function a(e,t){var n="";return e&&(n+=e,t||(n=n.toUpperCase())),n}function s(e,t){var n,r,i,o,a=this,l=0,c=h.subtree;for(void 0===t&&(t=this),n=a.length-1;n>=0;--n)r=a[n],i=r[c]||r,i instanceof Array||(i=void 0),i||(o=e.call(t,r.name?r:{name:r},l),l+=1,void 0!==o&&(null===o?(a.splice(n,1),l-=1):(a[n]=r=o,i=r[c]||r,i instanceof Array||(i=void 0)))),i&&(l+=s.call(i,e),0===i.length&&(a.splice(n,1),l-=1));return l}function l(e){var t=e.name||e,n=e.alias||e.header;return n?'"'+n+'" ('+t+")":t}function c(e){
return u.test(e)}var u=/^(\w+)\((\w+)\)$/,h={build:r,walk:s,lookup:o,formatItem:l,isGroupProxy:c,subtree:"submenu",defaultKey:"name"};t.exports=h},{}],17:[function(e,t,n){"use strict";function r(e,t){var n,i;if(i=e.match(u)){for(n=0;n<i.length;++n)"["===i[n][0]&&(i[n]=r.reserve(i[n])),i[n]="("+i[n]+")";for(i=e.match(new RegExp(s+i.join(s)+s)),i.shift(),n=1;n<i.length;n+=2){var h=i[n];switch(h){case c:h=o;break;case l:h=a;break;default:var p="^"===h[1]?2:1;h="["+r.reserve(h.substr(p,h.length-(p+1)))+"]"}i[n]=h}}else i=[e];for(n=0;n<i.length;n+=2)i[n]=r.reserve(i[n]);return i=i.join(""),i=i.substr(0,2)===o?i.substr(2):"^"+i,i.substr(-2,2)===o?i=i.substr(0,i.length-2):i+="$",new RegExp(i,t?"i":void 0)}var i=/([\.\\\+\*\?\^\$\(\)\{\}\=\!\<\>\|\:\[\]])/g,o=".*",a=".",s="("+o+")",l="_",c="%",u=new RegExp("("+[l,c,"\\[\\^?[^-\\]]+]","\\[\\^?[^-\\]]\\-[^\\]]]"].join("|")+")","g");r.reserve=function(e){return e.replace(i,"\\$1")};var h,p;(r.clearCache=function(e){return e?h[e]&&(delete h[e],p--):(h={},p=0),p})(),r.getCacheSize=function(){return p},r.cached=function(e,t,n){"string"==typeof e&&(n=t,t=e,e=!1);var i=t+(n?"i":"c"),o=h[i];if(o)o.when=(new Date).getTime(),void 0!==e&&(o.keep=e);else{if(p===r.cacheMax){var a,s,l=[],c=0;for(a in h)if(o=h[a],!o.keep){for(s=0;s<c&&!(o.when<l[s].item.when);++s);l.splice(s,0,{key:a,item:o}),c++}if(!l.length)return r(t,n);for(s=Math.ceil(l.length/10),p-=s;s--;)delete h[l[s].key]}o=h[i]={regex:r(t,n),keep:e,when:(new Date).getTime()},p++}return o.regex},t.exports=r},{}],18:[function(require,module,exports){function templex(e){var t=this instanceof Array?this:[this];return arguments.length>1&&t.unshift(arguments),e.replace(templex.regexp,templex.merger.bind(t))}templex.regexp=/\{(.*?)\}/g,templex["with"]=function(e,t){return"with(this["+e+"]){"+t+"}"},templex.cache=[],templex.deref=function(key){if(!(this.length in templex.cache)){for(var code="return eval(expr)",i=0;i<this.length;++i)code=templex["with"](i,code);templex.cache[this.length]=eval("(function(expr){"+code+"})")}return templex.cache[this.length].call(this,key)},templex.merger=function(e,t){var n;try{n=isNaN(t)?templex.deref.call(this,t):this[0][t]}catch(r){n="{"+t+"}"}return n},module.exports=templex},{}],19:[function(e,t,n){"use strict";function r(e){var t,n,i="function"==typeof this.toJSON?this.toJSON():this;return r.isArray(i)?(t=[],n=e&&e.nullElements,i.forEach(function(e){var i=r.call(e);void 0!==i?t.push(i):n&&t.push(null)})):"object"==typeof i?(t={},n=e&&e.nullProperties,Object.keys(i).forEach(function(e){var o=i[e];void 0!==o&&(o=r.call(i[e])),void 0!==o?t[e]=o:n&&(t[e]=null)})):t=i,t}r.isArray=function(e){return e.constructor===Array},r.crossFramesIsArray=function(e){return i.call(e)===o};var i=Object.prototype.toString,o="[object Array]";t.exports=r},{}]},{},[1]);